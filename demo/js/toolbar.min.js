(function(e,t){"use strict";var n=function(e,t){return new n.fn.init(e,t)};return n.fn=n.prototype={constructor:n,init:function(e,t){if(!e)return e;if(typeof e=="string"){e=document.querySelector(e);if(!e)return e}"length"in e&&(e=e[0]);var n=this,r=n.settings=n.extend({},n.settings,t);return n.buildVendorNames(),n.support.transitionEnd=n.eventNames[n.support.transition]||null,n.setupToolbarElements(e,r),n.applyTransitionEnd(),n.setupOritentationChange(),n.setupExpand(),this},version:"0.0.1",toolbar:t,topMenu:t,subMenu:t,expandTarget:t,hasMouse:"",touchType:"",touchStart:"",div:t,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},buildTransitionValue:function(e){var t=this.settings;return e+" "+t.expandSpeed+"ms "+t.easing},checkTransform3dSupport:function(){return this.div.style[this.support.transform]="",this.div.style[this.support.transform]="rotateY(90deg)",this.div.style[this.support.transform]!==""},buildVendorNames:function(){this.div=document.createElement("div"),this.support.transition=this.getVendorPropertyName("transition"),this.support.transitionDelay=this.getVendorPropertyName("transitionDelay"),this.support.transform=this.getVendorPropertyName("transform"),this.support.transformOrigin=this.getVendorPropertyName("transformOrigin"),this.support.transform3d=this.checkTransform3dSupport(),this.div=null},getVendorPropertyName:function(e){var t=["Moz","Webkit","O","ms"],n,r,i=e.charAt(0).toUpperCase()+e.substr(1);if(e in this.div.style)return e;for(r=0;r<t.length;++r){n=t[r]+i;if(n in this.div.style)return n}},setupToolbarElements:function(e,t){var n=this;n.toolbar=e,n.topMenu=n.toolbar.querySelector(t.topMenuSelector),n.subMenu=n.toolbar.querySelector(t.subMenuSelector),n.expandTarget=n.toolbar.querySelector(t.expandTargetSelector)},applyTransitionEnd:function(){var e=this;e.toolbar.addEventListener(e.support.transitionEnd,function(t){e.transitionEnd(t)})},transitionEnd:function(e){this.toolbar.style[this.support.transition]=""},setupExpand:function(){var t=this;t.touchType=e.navigator.msPointerEnabled?"pointer":"ontouchstart"in e?"touch":"mouse",t.hasMouse="ontouchstart"in e&&"onmousedown"in e,t.touchStart=this.touchType==="pointer"?"MSPointerDown":this.touchType==="touch"?"touchstart":"mousedown",t.expandTarget.addEventListener(t.touchStart,function(e){t.expandToolbar.call(t,e)}),t.hasMouse&&t.expandTarget.addEventListener("mousedown",function(e){t.expandToolbar.call(t,e)})},expandToolbar:function(e){e.preventDefault();var n=this,r=n.toolbar,i=n.topMenu!=t?n.topMenu.getBoundingClientRect():{height:"0px",width:"0px"},s=n.subMenu!=t?n.subMenu.getBoundingClientRect():{height:"0px",width:"0px"};r.orientation==="portrait"?r.style[n.support.transition]=n.buildTransitionValue("height"):r.style[n.support.transition]=n.buildTransitionValue("width"),r.expanded?(r.orientation==="portrait"?r.style.height="35px":r.style.width="42px",r.expanded=!1):(n.toolbar.orientation==="portrait"?r.style.height=i.height+s.height+"px":r.style.width="200px",r.expanded=!0)},setupOritentationChange:function(){var t=this,n=t.toolbar,r="onorientationchange"in e,i=r?"orientationchange":"resize";n.orientation=e.innerWidth>e.innerHeight?"landscape":"portrait",e.addEventListener(i,function(){n.orientation=e.innerWidth>e.innerHeight?"landscape":"portrait",n.orientation==="landscape"?(n.style.height=e.innerHeight+"px",n.style.width="42px"):(n.style.height="35px",n.style.width=e.innerWidth+"px")},!1)},handleOrientationChange:function(){},extend:function(){var e=arguments[0]||{},n=1,r,i,s,o,u=arguments.length;for(;n<u;n++)if((o=arguments[n])!==null)for(i in o){r=e[i],s=o[i];if(e===s)continue;s!==t&&(e[i]=s)}return e},settings:{mainSelector:".toolbar",topMenuSelector:".toolbar-top-menu",subMenuSelector:".toolbar-sub-menu",expandTargetSelector:".expand-toolbar",topLevelItems:[],secondLevelItems:[],expandSpeed:1e3,that:t,easing:"ease-in-out"}},n.fn.init.prototype=n.fn,e.toolbar=n})(window);